!function(a){a.fn.formToWizard=function(x,w){function m(){x=a(b).data("options"),e={GotoStep:function(d){var c="step"+ --d;if(void 0===a("#"+c)[0]){throw"Step No "+d+" not found!"}"none"===a("#"+c).css("display")&&(a(b).find(".stepDetails").hide(),a("#"+c).show(),u(d))},NextStep:function(){a(".stepDetails:visible").find("a.next").click()},PreviousStep:function(){a(".stepDetails:visible").find("a.prev").click()}}}function j(d){var c="step"+d;a("#"+c+"commands").append("<"+x.buttonTag+' href="#" id="'+c+'Prev" class="'+x.prevBtnClass+'">'+x.prevBtnName+"</"+x.buttonTag+">"),a("#"+c+"Prev").bind("click",function(f){return a("#"+c).hide(),a("#step"+(d-1)).show(),u(d-1),!1})}function q(d){var c="step"+d;a("#"+c+"commands").append("<"+x.buttonTag+' href="#" id="'+c+'Next" class="'+x.nextBtnClass+'">'+x.nextBtnName+"</"+x.buttonTag+">"),a("#"+c+"Next").bind("click",function(f){return x.validateBeforeNext(b,a("#"+c))===!0&&(a("#"+c).hide(),a("#step"+(d+1)).show(),u(d+1)),!1})}function u(c){"function"==typeof x.progress?x.progress(c,k):x.showProgress&&(a("#steps li").removeClass("current"),a("#stepDesc"+c).addClass("current")),x.select&&x.select(b,a("#step"+c))}if(0==this.length){return this}"string"!=typeof x&&(x=a.extend({submitButton:"",showProgress:!0,showStepNo:!0,validateBeforeNext:null,select:null,progress:null,nextBtnName:"Next &gt;",prevBtnName:"&lt; Back",buttonTag:"a",nextBtnClass:"btn next",prevBtnClass:"btn prev"},x));var b=this,v=a(b).find("fieldset"),k=v.length,g="#"+x.submitButton,e=null;if("string"!=typeof x){a(b).data("options",x),"function"!=typeof x.validateBeforeNext&&(x.validateBeforeNext=function(){return !0}),x.showProgress&&"function"!=typeof x.progress&&(x.showStepNo?a(b).before("<ul id='steps' class='steps'></ul>"):a(b).before("<ul id='steps' class='steps breadcrumb'></ul>")),v.each(function(c){a(this).wrap('<div id="step'+c+'" class="stepDetails"></div>'),a(this).append('<p id="step'+c+'commands" class="commands"></p>'),x.showProgress&&"function"!=typeof x.progress&&(x.showStepNo?a("#steps").append("<li id='stepDesc"+c+"'>Step "+(c+1)+"<span>"+a(this).find("legend").html()+"</span></li>"):a("#steps").append("<li id='stepDesc"+c+"'>"+a(this).find("legend").html()+"</li>")),0==c?(q(c),u(c)):c==k-1?(a("#step"+c).hide(),j(c),a(g).addClass("next").detach().appendTo("#step"+c+"commands")):(a("#step"+c).hide(),j(c),q(c))})}else{if("string"==typeof x){var h=x;if(m(),"function"!=typeof e[h]){throw h+" is invalid command!"}e[h](w)}}return this}}(jQuery);