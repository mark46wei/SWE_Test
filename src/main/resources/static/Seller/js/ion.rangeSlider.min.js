(function(a){"function"===typeof define&&define.amd?define(["jquery"],function(b){return a(b,document,window,navigator)}):"object"===typeof exports?a(require("jquery"),document,window,navigator):a(jQuery,document,window,navigator)})(function(a,d,b,h,e){var i=0,c=function(){var f=h.userAgent,j=/msie\s\d+/i;return 0<f.search(j)&&(f=j.exec(f).toString(),f=f.split(" ")[1],9>f)?(a("html").addClass("lt-ie9"),!0):!1}();Function.prototype.bind||(Function.prototype.bind=function(f){var j=this,l=[].slice;if("function"!=typeof j){throw new TypeError}var k=l.call(arguments,1),m=function(){if(this instanceof m){var n=function(){};n.prototype=j.prototype;var n=new n,o=j.apply(n,k.concat(l.call(arguments)));return Object(o)===o?o:n}return j.apply(f,k.concat(l.call(arguments)))};return m});Array.prototype.indexOf||(Array.prototype.indexOf=function(f,j){if(null==this){throw new TypeError('"this" is null or not defined')}var l=Object(this),k=l.length>>>0;if(0===k){return -1}var m=+j||0;Infinity===Math.abs(m)&&(m=0);if(m>=k){return -1}for(m=Math.max(0<=m?m:k-Math.abs(m),0);m<k;){if(m in l&&l[m]===f){return m}m++}return -1});var g=function(f,j,l){this.VERSION="2.2.0";this.input=f;this.plugin_count=l;this.old_to=this.old_from=this.update_tm=this.calc_count=this.current_plugin=0;this.raf_id=this.old_min_interval=null;this.no_diapason=this.force_redraw=this.dragging=!1;this.has_tab_index=!0;this.is_update=this.is_key=!1;this.is_start=!0;this.is_click=this.is_resize=this.is_active=this.is_finish=!1;j=j||{};this.$cache={win:a(b),body:a(d.body),input:a(f),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]};this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]};this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var k=this.$cache.input;f=k.prop("value");var m;l={type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" \u2014 ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};"INPUT"!==k[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",k[0]);k={type:k.data("type"),min:k.data("min"),max:k.data("max"),from:k.data("from"),to:k.data("to"),step:k.data("step"),min_interval:k.data("minInterval"),max_interval:k.data("maxInterval"),drag_interval:k.data("dragInterval"),values:k.data("values"),from_fixed:k.data("fromFixed"),from_min:k.data("fromMin"),from_max:k.data("fromMax"),from_shadow:k.data("fromShadow"),to_fixed:k.data("toFixed"),to_min:k.data("toMin"),to_max:k.data("toMax"),to_shadow:k.data("toShadow"),prettify_enabled:k.data("prettifyEnabled"),prettify_separator:k.data("prettifySeparator"),force_edges:k.data("forceEdges"),keyboard:k.data("keyboard"),grid:k.data("grid"),grid_margin:k.data("gridMargin"),grid_num:k.data("gridNum"),grid_snap:k.data("gridSnap"),hide_min_max:k.data("hideMinMax"),hide_from_to:k.data("hideFromTo"),prefix:k.data("prefix"),postfix:k.data("postfix"),max_postfix:k.data("maxPostfix"),decorate_both:k.data("decorateBoth"),values_separator:k.data("valuesSeparator"),input_values_separator:k.data("inputValuesSeparator"),disable:k.data("disable"),block:k.data("block"),extra_classes:k.data("extraClasses")};k.values=k.values&&k.values.split(",");for(m in k){k.hasOwnProperty(m)&&(k[m]!==e&&""!==k[m]||delete k[m])}f!==e&&""!==f&&(f=f.split(k.input_values_separator||j.input_values_separator||";"),f[0]&&f[0]==+f[0]&&(f[0]=+f[0]),f[1]&&f[1]==+f[1]&&(f[1]=+f[1]),j&&j.values&&j.values.length?(l.from=f[0]&&j.values.indexOf(f[0]),l.to=f[1]&&j.values.indexOf(f[1])):(l.from=f[0]&&+f[0],l.to=f[1]&&+f[1]));a.extend(l,j);a.extend(l,k);this.options=l;this.update_check={};this.validate();this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};this.init()};g.prototype={init:function(f){this.no_diapason=!1;this.coords.p_step=this.convertToPercent(this.options.step,!0);this.target="base";this.toggleInput();this.append();this.setMinMax();f?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart());this.updateScene()},append:function(){this.$cache.input.before('<span class="irs js-irs-'+this.plugin_count+" "+this.options.extra_classes+'"></span>');this.$cache.input.prop("readonly",!0);this.$cache.cont=this.$cache.input.prev();this.result.slider=this.$cache.cont;this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"><span class="irs-line-left"></span><span class="irs-line-mid"></span><span class="irs-line-right"></span></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span><span class="irs-bar"></span>');this.$cache.rs=this.$cache.cont.find(".irs");this.$cache.min=this.$cache.cont.find(".irs-min");this.$cache.max=this.$cache.cont.find(".irs-max");this.$cache.from=this.$cache.cont.find(".irs-from");this.$cache.to=this.$cache.cont.find(".irs-to");this.$cache.single=this.$cache.cont.find(".irs-single");this.$cache.bar=this.$cache.cont.find(".irs-bar");this.$cache.line=this.$cache.cont.find(".irs-line");this.$cache.grid=this.$cache.cont.find(".irs-grid");"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar-edge"></span><span class="irs-shadow shadow-single"></span><span class="irs-slider single"></span>'),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-slider from"></span><span class="irs-slider to"></span>'),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler());this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none");this.appendGrid();this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents());this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask());this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var f=this.options.max,j=this.options.to;this.options.from>this.options.min&&j===f?this.$cache.s_from.addClass("type_last"):j<f&&this.$cache.s_to.addClass("type_last")},changeLevel:function(f){switch(f){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);this.$cache.s_from.addClass("state_hover");this.$cache.s_from.addClass("type_last");this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake);this.$cache.s_to.addClass("state_hover");this.$cache.s_to.addClass("type_last");this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>');this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask");this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove();this.$cache.cont=null;this.$cache.line.off("keydown.irs_"+this.plugin_count);this.$cache.body.off("touchmove.irs_"+this.plugin_count);this.$cache.body.off("mousemove.irs_"+this.plugin_count);this.$cache.win.off("touchend.irs_"+this.plugin_count);this.$cache.win.off("mouseup.irs_"+this.plugin_count);c&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count));this.$cache.grid_labels=[];this.coords.big=[];this.coords.big_w=[];this.coords.big_p=[];this.coords.big_x=[];cancelAnimationFrame(this.raf_id)},bindEvents:function(){if(!this.no_diapason){this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this));this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this));this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"));this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this));this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")));"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")));if(this.options.keyboard){this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard"))}c&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this)))}},pointerFocus:function(f){if(!this.target){var j="single"===this.options.type?this.$cache.single:this.$cache.from;f=j.offset().left;f+=j.width()/2-1;this.pointerClick("single",{preventDefault:function(){},pageX:f})}},pointerMove:function(f){this.dragging&&(this.coords.x_pointer=(f.pageX||f.originalEvent.touches&&f.originalEvent.touches[0].pageX)-this.coords.x_gap,this.calc())},pointerUp:function(f){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,c&&a("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(a.contains(this.$cache.cont[0],f.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(f,j){j.preventDefault();var k=j.pageX||j.originalEvent.touches&&j.originalEvent.touches[0].pageX;2!==j.button&&("both"===f&&this.setTempMinInterval(),f||(f=this.target||"from"),this.current_plugin=this.plugin_count,this.target=f,this.dragging=this.is_active=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=k-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(f),c&&a("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(f,j){j.preventDefault();var k=j.pageX||j.originalEvent.touches&&j.originalEvent.touches[0].pageX;2!==j.button&&(this.current_plugin=this.plugin_count,this.target=f,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(k-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(f,j){if(!(this.current_plugin!==this.plugin_count||j.altKey||j.ctrlKey||j.shiftKey||j.metaKey)){switch(j.which){case 83:case 65:case 40:case 37:j.preventDefault();this.moveByKey(!1);break;case 87:case 68:case 38:case 39:j.preventDefault(),this.moveByKey(!0)}return !0}},moveByKey:function(f){var j=this.coords.p_pointer,k=(this.options.max-this.options.min)/100,k=this.options.step/k;this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*(f?j+k:j-k));this.is_key=!0;this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max){this.$cache.min[0].style.display="none",this.$cache.max[0].style.display="none"}else{if(this.options.values.length){this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))}else{var f=this._prettify(this.options.min),j=this._prettify(this.options.max);this.result.min_pretty=f;this.result.max_pretty=j;this.$cache.min.html(this.decorate(f,this.options.min));this.$cache.max.html(this.decorate(j,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(!1);this.labels.w_max=this.$cache.max.outerWidth(!1)}}},setTempMinInterval:function(){var f=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval);this.options.min_interval=f},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(f){if(this.options){this.calc_count++;if(10===this.calc_count||f){this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()}if(this.coords.w_rs){this.calcPointerPercent();f=this.getHandleX();"both"===this.target&&(this.coords.p_gap=0,f=this.getHandleX());"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,f=this.getHandleX(),this.target=this.options.drag_interval?"both_one":this.chooseHandle(f));switch(this.target){case"base":var j=(this.options.max-this.options.min)/100;f=(this.result.from-this.options.min)/j;j=(this.result.to-this.options.min)/j;this.coords.p_single_real=this.toFixed(f);this.coords.p_from_real=this.toFixed(f);this.coords.p_to_real=this.toFixed(j);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);this.target=null;break;case"single":if(this.options.from_fixed){break}this.coords.p_single_real=this.convertToRealPercent(f);this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed){break}this.coords.p_from_real=this.convertToRealPercent(f);this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed){break}this.coords.p_to_real=this.convertToRealPercent(f);this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed){break}f=this.toFixed(f+0.001*this.coords.p_handle);this.coords.p_from_real=this.convertToRealPercent(f)-this.coords.p_gap_left;this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.convertToRealPercent(f)+this.coords.p_gap_right;this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(!this.options.from_fixed&&!this.options.to_fixed){var l=this.convertToRealPercent(f);f=this.result.to_percent-this.result.from_percent;var k=f/2,j=l-k,l=l+k;0>j&&(j=0,l=j+f);100<l&&(l=100,j=l-f);this.coords.p_from_real=this.calcWithStep(j);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.calcWithStep(l);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to]));this.calcMinMax();this.calcLabels()}}},calcPointerPercent:function(){this.coords.w_rs?(0>this.coords.x_pointer||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(f){return f/(100-this.coords.p_handle)*100},convertToFakePercent:function(f){return f/100*(100-this.coords.p_handle)},getHandleX:function(){var f=100-this.coords.p_handle,j=this.toFixed(this.coords.p_pointer-this.coords.p_gap);0>j?j=0:j>f&&(j=f);return j},calcHandlePercent:function(){this.coords.w_handle="single"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1);this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(f){return"single"===this.options.type?"single":f>=this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null);clearTimeout(this.update_tm);this.update_tm=null;this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1);if(this.coords.w_rs){this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0);if(this.coords.w_rs!==this.coords.w_rs_old||this.force_redraw){this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()}if(this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)){if(this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key){this.drawLabels();this.$cache.bar[0].style.left=this.coords.p_bar_x+"%";this.$cache.bar[0].style.width=this.coords.p_bar_w+"%";if("single"===this.options.type){this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%"}else{this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%";this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%";if(this.old_from!==this.result.from||this.force_redraw){this.$cache.from[0].style.left=this.labels.p_from_left+"%"}if(this.old_to!==this.result.to||this.force_redraw){this.$cache.to[0].style.left=this.labels.p_to_left+"%"}}this.$cache.single[0].style.left=this.labels.p_single_left+"%";this.writeToInput();this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input"));this.old_from=this.result.from;this.old_to=this.result.to;this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange();if(this.is_key||this.is_click){this.is_click=this.is_key=!1,this.callOnFinish()}this.is_finish=this.is_resize=this.is_update=!1}this.force_redraw=this.is_click=this.is_key=this.is_start=!1}}},drawLabels:function(){if(this.options){var f=this.options.values.length,j=this.options.p_values;if(!this.options.hide_from_to){if("single"===this.options.type){if(f){f=this.decorate(j[this.result.from])}else{var l=this._prettify(this.result.from);f=this.decorate(l,this.result.from)}this.$cache.single.html(f);this.calcLabels();this.$cache.min[0].style.visibility=this.labels.p_single_left<this.labels.p_min+1?"hidden":"visible";this.$cache.max[0].style.visibility=this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?"hidden":"visible"}else{f?(this.options.decorate_both?(f=this.decorate(j[this.result.from]),f+=this.options.values_separator,f+=this.decorate(j[this.result.to])):f=this.decorate(j[this.result.from]+this.options.values_separator+j[this.result.to]),l=this.decorate(j[this.result.from]),j=this.decorate(j[this.result.to])):(l=this._prettify(this.result.from),j=this._prettify(this.result.to),this.options.decorate_both?(f=this.decorate(l,this.result.from),f+=this.options.values_separator,f+=this.decorate(j,this.result.to)):f=this.decorate(l+this.options.values_separator+j,this.result.to),l=this.decorate(l,this.result.from),j=this.decorate(j,this.result.to));this.$cache.single.html(f);this.$cache.from.html(l);this.$cache.to.html(j);this.calcLabels();f=Math.min(this.labels.p_single_left,this.labels.p_from_left);l=this.labels.p_single_left+this.labels.p_single_fake;var j=this.labels.p_to_left+this.labels.p_to_fake,k=Math.max(l,j);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",k=j):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",k=Math.max(l,j))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden");this.$cache.min[0].style.visibility=f<this.labels.p_min+1?"hidden":"visible";this.$cache.max[0].style.visibility=k>100-this.labels.p_max-1?"hidden":"visible"}}}},drawShadow:function(){var f=this.options,j=this.$cache,l="number"===typeof f.from_min&&!isNaN(f.from_min),k="number"===typeof f.from_max&&!isNaN(f.from_max),m="number"===typeof f.to_min&&!isNaN(f.to_min),n="number"===typeof f.to_max&&!isNaN(f.to_max);"single"===f.type?f.from_shadow&&(l||k)?(l=this.convertToPercent(l?f.from_min:f.min),k=this.convertToPercent(k?f.from_max:f.max)-l,l=this.toFixed(l-this.coords.p_handle/100*l),k=this.toFixed(k-this.coords.p_handle/100*k),l+=this.coords.p_handle/2,j.shad_single[0].style.display="block",j.shad_single[0].style.left=l+"%",j.shad_single[0].style.width=k+"%"):j.shad_single[0].style.display="none":(f.from_shadow&&(l||k)?(l=this.convertToPercent(l?f.from_min:f.min),k=this.convertToPercent(k?f.from_max:f.max)-l,l=this.toFixed(l-this.coords.p_handle/100*l),k=this.toFixed(k-this.coords.p_handle/100*k),l+=this.coords.p_handle/2,j.shad_from[0].style.display="block",j.shad_from[0].style.left=l+"%",j.shad_from[0].style.width=k+"%"):j.shad_from[0].style.display="none",f.to_shadow&&(m||n)?(m=this.convertToPercent(m?f.to_min:f.min),f=this.convertToPercent(n?f.to_max:f.max)-m,m=this.toFixed(m-this.coords.p_handle/100*m),f=this.toFixed(f-this.coords.p_handle/100*f),m+=this.coords.p_handle/2,j.shad_to[0].style.display="block",j.shad_to[0].style.left=m+"%",j.shad_to[0].style.width=f+"%"):j.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput();if(this.options.onStart&&"function"===typeof this.options.onStart){if(this.options.scope){this.options.onStart.call(this.options.scope,this.result)}else{this.options.onStart(this.result)}}},callOnChange:function(){this.writeToInput();if(this.options.onChange&&"function"===typeof this.options.onChange){if(this.options.scope){this.options.onChange.call(this.options.scope,this.result)}else{this.options.onChange(this.result)}}},callOnFinish:function(){this.writeToInput();if(this.options.onFinish&&"function"===typeof this.options.onFinish){if(this.options.scope){this.options.onFinish.call(this.options.scope,this.result)}else{this.options.onFinish(this.result)}}},callOnUpdate:function(){this.writeToInput();if(this.options.onUpdate&&"function"===typeof this.options.onUpdate){if(this.options.scope){this.options.onUpdate.call(this.options.scope,this.result)}else{this.options.onUpdate(this.result)}}},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input");this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex");this.has_tab_index=!this.has_tab_index},convertToPercent:function(f,j){var k=this.options.max-this.options.min;return k?this.toFixed((j?f:f-this.options.min)/(k/100)):(this.no_diapason=!0,0)},convertToValue:function(j){var k=this.options.min,n=this.options.max,m=k.toString().split(".")[1],o=n.toString().split(".")[1],q,s,p=0,r=0;if(0===j){return this.options.min}if(100===j){return this.options.max}m&&(p=q=m.length);o&&(p=s=o.length);q&&s&&(p=q>=s?q:s);0>k&&(r=Math.abs(k),k=+(k+r).toFixed(p),n=+(n+r).toFixed(p));j=(n-k)/100*j+k;(k=this.options.step.toString().split(".")[1])?j=+j.toFixed(k.length):(j/=this.options.step,j*=this.options.step,j=+j.toFixed(0));r&&(j-=r);r=k?+j.toFixed(k.length):this.toFixed(j);r<this.options.min?r=this.options.min:r>this.options.max&&(r=this.options.max);return r},calcWithStep:function(f){var j=Math.round(f/this.coords.p_step)*this.coords.p_step;100<j&&(j=100);100===f&&(j=100);return this.toFixed(j)},checkMinInterval:function(f,j,l){var k=this.options;if(!k.min_interval){return f}f=this.convertToValue(f);j=this.convertToValue(j);"from"===l?j-f<k.min_interval&&(f=j-k.min_interval):f-j<k.min_interval&&(f=j+k.min_interval);return this.convertToPercent(f)},checkMaxInterval:function(f,j,l){var k=this.options;if(!k.max_interval){return f}f=this.convertToValue(f);j=this.convertToValue(j);"from"===l?j-f>k.max_interval&&(f=j-k.max_interval):f-j>k.max_interval&&(f=j+k.max_interval);return this.convertToPercent(f)},checkDiapason:function(f,j,l){f=this.convertToValue(f);var k=this.options;"number"!==typeof j&&(j=k.min);"number"!==typeof l&&(l=k.max);f<j&&(f=j);f>l&&(f=l);return this.convertToPercent(f)},toFixed:function(f){f=f.toFixed(20);return +f},_prettify:function(f){return this.options.prettify_enabled?this.options.prettify&&"function"===typeof this.options.prettify?this.options.prettify(f):this.prettify(f):f},prettify:function(f){return f.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(f,j){if(!this.options.force_edges){return this.toFixed(f)}0>f?f=0:f>100-j&&(f=100-j);return this.toFixed(f)},validate:function(){var f=this.options,j=this.result,l=f.values,k=l.length,m;"string"===typeof f.min&&(f.min=+f.min);"string"===typeof f.max&&(f.max=+f.max);"string"===typeof f.from&&(f.from=+f.from);"string"===typeof f.to&&(f.to=+f.to);"string"===typeof f.step&&(f.step=+f.step);"string"===typeof f.from_min&&(f.from_min=+f.from_min);"string"===typeof f.from_max&&(f.from_max=+f.from_max);"string"===typeof f.to_min&&(f.to_min=+f.to_min);"string"===typeof f.to_max&&(f.to_max=+f.to_max);"string"===typeof f.grid_num&&(f.grid_num=+f.grid_num);f.max<f.min&&(f.max=f.min);if(k){for(f.p_values=[],f.min=0,f.max=k-1,f.step=1,f.grid_num=f.max,f.grid_snap=!0,m=0;m<k;m++){var n=+l[m];isNaN(n)?n=l[m]:(l[m]=n,n=this._prettify(n));f.p_values.push(n)}}if("number"!==typeof f.from||isNaN(f.from)){f.from=f.min}if("number"!==typeof f.to||isNaN(f.to)){f.to=f.max}"single"===f.type?(f.from<f.min&&(f.from=f.min),f.from>f.max&&(f.from=f.max)):(f.from<f.min&&(f.from=f.min),f.from>f.max&&(f.from=f.max),f.to<f.min&&(f.to=f.min),f.to>f.max&&(f.to=f.max),this.update_check.from&&(this.update_check.from!==f.from&&f.from>f.to&&(f.from=f.to),this.update_check.to!==f.to&&f.to<f.from&&(f.to=f.from)),f.from>f.to&&(f.from=f.to),f.to<f.from&&(f.to=f.from));if("number"!==typeof f.step||isNaN(f.step)||!f.step||0>f.step){f.step=1}"number"===typeof f.from_min&&f.from<f.from_min&&(f.from=f.from_min);"number"===typeof f.from_max&&f.from>f.from_max&&(f.from=f.from_max);"number"===typeof f.to_min&&f.to<f.to_min&&(f.to=f.to_min);"number"===typeof f.to_max&&f.from>f.to_max&&(f.to=f.to_max);if(j){j.min!==f.min&&(j.min=f.min);j.max!==f.max&&(j.max=f.max);if(j.from<j.min||j.from>j.max){j.from=f.from}if(j.to<j.min||j.to>j.max){j.to=f.to}}if("number"!==typeof f.min_interval||isNaN(f.min_interval)||!f.min_interval||0>f.min_interval){f.min_interval=0}if("number"!==typeof f.max_interval||isNaN(f.max_interval)||!f.max_interval||0>f.max_interval){f.max_interval=0}f.min_interval&&f.min_interval>f.max-f.min&&(f.min_interval=f.max-f.min);f.max_interval&&f.max_interval>f.max-f.min&&(f.max_interval=f.max-f.min)},decorate:function(f,j){var l="",k=this.options;k.prefix&&(l+=k.prefix);l+=f;k.max_postfix&&(k.values.length&&f===k.p_values[k.max]?(l+=k.max_postfix,k.postfix&&(l+=" ")):j===k.max&&(l+=k.max_postfix,k.postfix&&(l+=" ")));k.postfix&&(l+=k.postfix);return l},updateFrom:function(){this.result.from=this.options.from;this.result.from_percent=this.convertToPercent(this.result.from);this.result.from_pretty=this._prettify(this.result.from);this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to;this.result.to_percent=this.convertToPercent(this.result.to);this.result.to_pretty=this._prettify(this.result.to);this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min;this.result.max=this.options.max;this.updateFrom();this.updateTo()},appendGrid:function(){if(this.options.grid){var j=this.options,l;var p=j.max-j.min;var o=j.grid_num,q=4,s="";this.calcGridMargin();if(j.grid_snap){if(50<p){o=50/j.step;var r=this.toFixed(j.step/0.5)}else{o=p/j.step,r=this.toFixed(j.step/(p/100))}}else{r=this.toFixed(100/o)}4<o&&(q=3);7<o&&(q=2);14<o&&(q=1);28<o&&(q=0);for(p=0;p<o+1;p++){var u=q;var t=this.toFixed(r*p);100<t&&(t=100);this.coords.big[p]=t;var v=(t-r*(p-1))/(u+1);for(l=1;l<=u&&0!==t;l++){var w=this.toFixed(t-v*l);s+='<span class="irs-grid-pol small" style="left: '+w+'%"></span>'}s+='<span class="irs-grid-pol" style="left: '+t+'%"></span>';l=this.convertToValue(t);l=j.values.length?j.p_values[l]:this._prettify(l);s+='<span class="irs-grid-text js-grid-text-'+p+'" style="left: '+t+'%">'+l+"</span>"}this.coords.big_num=Math.ceil(o+1);this.$cache.cont.addClass("irs-with-grid");this.$cache.grid.html(s);this.cacheGridLabels()}},cacheGridLabels:function(){var f,j=this.coords.big_num;for(f=0;f<j;f++){var k=this.$cache.grid.find(".js-grid-text-"+f);this.$cache.grid_labels.push(k)}this.calcGridLabels()},calcGridLabels:function(){var f;var j=[];var l=[],k=this.coords.big_num;for(f=0;f<k;f++){this.coords.big_w[f]=this.$cache.grid_labels[f].outerWidth(!1),this.coords.big_p[f]=this.toFixed(this.coords.big_w[f]/this.coords.w_rs*100),this.coords.big_x[f]=this.toFixed(this.coords.big_p[f]/2),j[f]=this.toFixed(this.coords.big[f]-this.coords.big_x[f]),l[f]=this.toFixed(j[f]+this.coords.big_p[f])}this.options.force_edges&&(j[0]<-this.coords.grid_gap&&(j[0]=-this.coords.grid_gap,l[0]=this.toFixed(j[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),l[k-1]>100+this.coords.grid_gap&&(l[k-1]=100+this.coords.grid_gap,j[k-1]=this.toFixed(l[k-1]-this.coords.big_p[k-1]),this.coords.big_x[k-1]=this.toFixed(this.coords.big_p[k-1]-this.coords.grid_gap)));this.calcGridCollision(2,j,l);this.calcGridCollision(4,j,l);for(f=0;f<k;f++){j=this.$cache.grid_labels[f][0],this.coords.big_x[f]!==Number.POSITIVE_INFINITY&&(j.style.marginLeft=-this.coords.big_x[f]+"%")}},calcGridCollision:function(j,k,m){var l,n=this.coords.big_num;for(l=0;l<n;l+=j){var p=l+j/2;if(p>=n){break}var o=this.$cache.grid_labels[p][0];o.style.visibility=m[l]<=k[p]?"visible":"hidden"}},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_handle="single"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-0.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(f){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=a.extend(this.options,f),this.validate(),this.updateResult(f),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),a.data(this.input,"ionRangeSlider",null),this.remove(),this.options=this.input=null)}};a.fn.ionRangeSlider=function(f){return this.each(function(){a.data(this,"ionRangeSlider")||a.data(this,"ionRangeSlider",new g(this,f,i++))})};(function(){for(var f=0,j=["ms","moz","webkit","o"],k=0;k<j.length&&!b.requestAnimationFrame;++k){b.requestAnimationFrame=b[j[k]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[j[k]+"CancelAnimationFrame"]||b[j[k]+"CancelRequestAnimationFrame"]}b.requestAnimationFrame||(b.requestAnimationFrame=function(l,n){var m=(new Date).getTime(),o=Math.max(0,16-(m-f)),p=b.setTimeout(function(){l(m+o)},o);f=m+o;return p});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(l){clearTimeout(l)})})()});