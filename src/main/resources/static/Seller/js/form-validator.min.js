(function(d){var c={init:function(a){var b=this;if(!b.data("jqv")||b.data("jqv")==null){a=c._saveOptions(b,a);d(document).on("click",".formError",function(){d(this).fadeOut(150,function(){d(this).parent(".formErrorOuter").remove();d(this).remove()})})}return this},attach:function(f){var b=this;var a;if(f){a=c._saveOptions(b,f)}else{a=b.data("jqv")}a.validateAttribute=(b.find("[data-validation-engine*=validate]").length)?"data-validation-engine":"class";if(a.binded){b.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",c._onFieldEvent);b.on("click","["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]",c._onFieldEvent);b.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate][class*=datepicker]",{delay:300},c._onFieldEvent)}if(a.autoPositionUpdate){d(window).bind("resize",{noAnimation:true,formElem:b},c.updatePromptsPosition)}b.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",c._submitButtonClick);b.removeData("jqv_submitButton");b.on("submit",c._onSubmitEvent);return this},detach:function(){var b=this;var a=b.data("jqv");b.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").off(a.validationEventTrigger,c._onFieldEvent);b.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",c._onFieldEvent);b.off("submit",c.onAjaxFormComplete);b.off("submit",c.onAjaxFormComplete);b.removeData("jqv");b.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",c._submitButtonClick);b.removeData("jqv_submitButton");if(a.autoPositionUpdate){d(window).unbind("resize",c.updatePromptsPosition)}return this},validate:function(){var b=d(this);var h=null;if(b.is("form")||b.hasClass("validationEngineContainer")){if(b.hasClass("validating")){return false}else{b.addClass("validating");var a=b.data("jqv");var h=c._validateFields(this);setTimeout(function(){b.removeClass("validating")},100);if(h&&a.onSuccess){a.onSuccess()}else{if(!h&&a.onFailure){a.onFailure()}}}}else{if(b.is("form")||b.hasClass("validationEngineContainer")){b.removeClass("validating")}else{var g=b.closest("form, .validationEngineContainer"),a=(g.data("jqv"))?g.data("jqv"):d.validationEngine.defaults,h=c._validateField(b,a);if(h&&a.onFieldSuccess){a.onFieldSuccess()}else{if(a.onFieldFailure&&a.InvalidFields.length>0){a.onFieldFailure()}}}}if(a.onValidationComplete){return !!a.onValidationComplete(g,h)}return h},updatePromptsPosition:function(h){if(h&&this==window){var g=h.data.formElem;var a=h.data.noAnimation}else{var g=d(this.closest("form, .validationEngineContainer"))}var b=g.data("jqv");g.find("["+b.validateAttribute+"*=validate]").not(":disabled").each(function(){var j=d(this);if(b.prettySelect&&j.is(":hidden")){j=g.find("#"+b.usePrefix+j.attr("id")+b.useSuffix)}var e=c._getPrompt(j);var f=d(e).find(".formErrorContent").html();if(e){c._updatePrompt(j,d(e),f,undefined,false,b,a)}});return this},showPrompt:function(b,j,l,i){var k=this.closest("form, .validationEngineContainer");var a=k.data("jqv");if(!a){a=c._saveOptions(this,a)}if(l){a.promptPosition=l}a.showArrow=i==true;c._showPrompt(this,b,j,false,a);return this},hide:function(){var h=d(this).closest("form, .validationEngineContainer");var b=h.data("jqv");var g=(b&&b.fadeDuration)?b.fadeDuration:0.3;var a;if(d(this).is("form")||d(this).hasClass("validationEngineContainer")){a="parentForm"+c._getClassName(d(this).attr("id"))}else{a=c._getClassName(d(this).attr("id"))+"formError"}d("."+a).fadeTo(g,0.3,function(){d(this).parent(".formErrorOuter").remove();d(this).remove()});return this},hideAll:function(){var b=this;var a=b.data("jqv");var f=a?a.fadeDuration:300;d(".formError").fadeTo(f,300,function(){d(this).parent(".formErrorOuter").remove();d(this).remove()});return this},_onFieldEvent:function(g){var h=d(this);var b=h.closest("form, .validationEngineContainer");var a=b.data("jqv");a.eventTrigger="field";window.setTimeout(function(){c._validateField(h,a);if(a.InvalidFields.length==0&&a.onFieldSuccess){a.onFieldSuccess()}else{if(a.InvalidFields.length>0&&a.onFieldFailure){a.onFieldFailure()}}},(g.data)?g.data.delay:0)},_onSubmitEvent:function(){var h=d(this);var a=h.data("jqv");if(h.data("jqv_submitButton")){var b=d("#"+h.data("jqv_submitButton"));if(b){if(b.length>0){if(b.hasClass("validate-skip")||b.attr("data-validation-engine-skip")=="true"){return true}}}}a.eventTrigger="submit";var g=c._validateFields(h);if(g&&a.ajaxFormValidation){c._validateFormWithAjax(h,a);return false}if(a.onValidationComplete){return !!a.onValidationComplete(h,g)}return g},_checkAjaxStatus:function(b){var a=true;d.each(b.ajaxValidCache,function(g,h){if(!h){a=false;return false}});return a},_checkAjaxFieldStatus:function(a,b){return b.ajaxValidCache[a]==true},_validateFields:function(o){var w=o.data("jqv");var p=false;o.trigger("jqv.form.validating");var x=null;o.find("["+w.validateAttribute+"*=validate]").not(":disabled").each(function(){var f=d(this);var e=[];if(d.inArray(f.attr("name"),e)<0){p|=c._validateField(f,w);if(p&&x==null){if(f.is(":hidden")&&w.prettySelect){x=f=o.find("#"+w.usePrefix+c._jqSelector(f.attr("id"))+w.useSuffix)}else{x=f}}if(w.doNotShowAllErrosOnSubmit){return false}e.push(f.attr("name"));if(w.showOneMessage==true&&p){return false}}});o.trigger("jqv.form.result",[p]);if(p){if(w.scroll){var v=x.offset().top;var r=x.offset().left;var t=w.promptPosition;if(typeof(t)=="string"&&t.indexOf(":")!=-1){t=t.substring(0,t.indexOf(":"))}if(t!="bottomRight"&&t!="bottomLeft"){var s=c._getPrompt(x);if(s){v=s.offset().top}}if(w.scrollOffset){v-=w.scrollOffset}if(w.isOverflown){var a=d(w.overflownDIV);if(!a.length){return false}var b=a.scrollTop();var q=-parseInt(a.offset().top);v+=b+q-5;var u=d(w.overflownDIV+":not(:animated)");u.animate({scrollTop:v},1100,function(){if(w.focusFirstField){x.focus()}})}else{d("html, body").animate({scrollTop:v},1100,function(){if(w.focusFirstField){x.focus()}});d("html, body").animate({scrollLeft:r},1100)}}else{if(w.focusFirstField){x.focus()}}return false}return true},_validateFormWithAjax:function(k,i){var l=k.serialize();var j=(i.ajaxFormValidationMethod)?i.ajaxFormValidationMethod:"GET";var b=(i.ajaxFormValidationURL)?i.ajaxFormValidationURL:k.attr("action");var a=(i.dataType)?i.dataType:"json";d.ajax({type:j,url:b,cache:false,dataType:a,data:l,form:k,methods:c,options:i,beforeSend:function(){return i.onBeforeAjaxFormValidation(k,i)},error:function(e,f){c._ajaxError(e,f)},success:function(r){if((a=="json")&&(r!==true)){var g=false;for(var h=0;h<r.length;h++){var s=r[h];var u=s[0];var f=d(d("#"+u)[0]);if(f.length==1){var t=s[2];if(s[1]==true){if(t==""||!t){c._closePrompt(f)}else{if(i.allrules[t]){var e=i.allrules[t].alertTextOk;if(e){t=e}}if(i.showPrompts){c._showPrompt(f,t,"pass",false,i,true)}}}else{g|=true;if(i.allrules[t]){var e=i.allrules[t].alertText;if(e){t=e}}if(i.showPrompts){c._showPrompt(f,t,"",false,i,true)}}}}i.onAjaxFormComplete(!g,k,r,i)}else{i.onAjaxFormComplete(true,k,r,i)}}})},_validateField:function(i,H,O){if(!i.attr("id")){i.attr("id","form-validation-field-"+d.validationEngine.fieldIdCounter);++d.validationEngine.fieldIdCounter}if(!H.validateNonVisibleFields&&(i.is(":hidden")&&!H.prettySelect||i.parent().is(":hidden"))){return false}var Q=i.attr(H.validateAttribute);var V=/validate\[(.*)\]/.exec(Q);if(!V){return false}var R=V[1];var N=R.split(/\[|,|\]/);var K=false;var F=i.attr("name");var E="";var U="";var P=false;var a=false;H.isError=false;H.showArrow=true;if(H.maxErrorsPerField>0){a=true}var B=d(i.closest("form, .validationEngineContainer"));for(var T=0;T<N.length;T++){N[T]=N[T].replace(" ","");if(N[T]===""){delete N[T]}}for(var T=0,J=0;T<N.length;T++){if(a&&J>=H.maxErrorsPerField){if(!P){var G=d.inArray("required",N);P=(G!=-1&&G>=T)}break}var D=undefined;switch(N[T]){case"required":P=true;D=c._getErrorMessage(B,i,N[T],N,T,H,c._required);break;case"custom":D=c._getErrorMessage(B,i,N[T],N,T,H,c._custom);break;case"groupRequired":var S="["+H.validateAttribute+"*="+N[T+1]+"]";var C=B.find(S).eq(0);if(C[0]!=i[0]){c._validateField(C,H,O);H.showArrow=true}D=c._getErrorMessage(B,i,N[T],N,T,H,c._groupRequired);if(D){P=true}H.showArrow=false;break;case"ajax":D=c._ajax(i,N,T,H);if(D){U="load"}break;case"minSize":D=c._getErrorMessage(B,i,N[T],N,T,H,c._minSize);break;case"maxSize":D=c._getErrorMessage(B,i,N[T],N,T,H,c._maxSize);break;case"min":D=c._getErrorMessage(B,i,N[T],N,T,H,c._min);break;case"max":D=c._getErrorMessage(B,i,N[T],N,T,H,c._max);break;case"past":D=c._getErrorMessage(B,i,N[T],N,T,H,c._past);break;case"future":D=c._getErrorMessage(B,i,N[T],N,T,H,c._future);break;case"dateRange":var S="["+H.validateAttribute+"*="+N[T+1]+"]";H.firstOfGroup=B.find(S).eq(0);H.secondOfGroup=B.find(S).eq(1);if(H.firstOfGroup[0].value||H.secondOfGroup[0].value){D=c._getErrorMessage(B,i,N[T],N,T,H,c._dateRange)}if(D){P=true}H.showArrow=false;break;case"dateTimeRange":var S="["+H.validateAttribute+"*="+N[T+1]+"]";H.firstOfGroup=B.find(S).eq(0);H.secondOfGroup=B.find(S).eq(1);if(H.firstOfGroup[0].value||H.secondOfGroup[0].value){D=c._getErrorMessage(B,i,N[T],N,T,H,c._dateTimeRange)}if(D){P=true}H.showArrow=false;break;case"maxCheckbox":i=d(B.find("input[name='"+F+"']"));D=c._getErrorMessage(B,i,N[T],N,T,H,c._maxCheckbox);break;case"minCheckbox":i=d(B.find("input[name='"+F+"']"));D=c._getErrorMessage(B,i,N[T],N,T,H,c._minCheckbox);break;case"equals":D=c._getErrorMessage(B,i,N[T],N,T,H,c._equals);break;case"funcCall":D=c._getErrorMessage(B,i,N[T],N,T,H,c._funcCall);break;case"creditCard":D=c._getErrorMessage(B,i,N[T],N,T,H,c._creditCard);break;case"condRequired":D=c._getErrorMessage(B,i,N[T],N,T,H,c._condRequired);if(D!==undefined){P=true}break;default:}var I=false;if(typeof D=="object"){switch(D.status){case"_break":I=true;break;case"_error":D=D.message;break;case"_error_no_prompt":return true;break;default:break}}if(I){break}if(typeof D=="string"){E+=D+"<br/>";H.isError=true;J++}}if(!P&&!(i.val())&&i.val().length<1){H.isError=false}var L=i.prop("type");var b=i.data("promptPosition")||H.promptPosition;if((L=="radio"||L=="checkbox")&&B.find("input[name='"+F+"']").size()>1){if(b==="inline"){i=d(B.find("input[name='"+F+"'][type!=hidden]:last"))}else{i=d(B.find("input[name='"+F+"'][type!=hidden]:first"))}H.showArrow=false}if(i.is(":hidden")&&H.prettySelect){i=B.find("#"+H.usePrefix+c._jqSelector(i.attr("id"))+H.useSuffix)}if(H.isError&&H.showPrompts){c._showPrompt(i,E,U,false,H)}else{if(!K){c._closePrompt(i)}}if(!K){i.trigger("jqv.field.result",[i,H.isError,E])}var M=d.inArray(i[0],H.InvalidFields);if(M==-1){if(H.isError){H.InvalidFields.push(i[0])}}else{if(!H.isError){H.InvalidFields.splice(M,1)}}c._handleStatusCssClasses(i,H);if(H.isError&&H.onFieldFailure){H.onFieldFailure(i)}if(!H.isError&&H.onFieldSuccess){H.onFieldSuccess(i)}return H.isError},_handleStatusCssClasses:function(b,a){if(a.addSuccessCssClassToField){b.removeClass(a.addSuccessCssClassToField)}if(a.addFailureCssClassToField){b.removeClass(a.addFailureCssClassToField)}if(a.addSuccessCssClassToField&&!a.isError){b.addClass(a.addSuccessCssClassToField)}if(a.addFailureCssClassToField&&a.isError){b.addClass(a.addFailureCssClassToField)}},_getErrorMessage:function(a,y,w,A,s,B,x){var u=jQuery.inArray(w,A);if(w==="custom"||w==="funcCall"){var z=A[u+1];w=w+"["+z+"]";delete (A[u])}var b=w;var i=(y.attr("data-validation-engine"))?y.attr("data-validation-engine"):y.attr("class");var t=i.split(" ");var v;if(w=="future"||w=="past"||w=="maxCheckbox"||w=="minCheckbox"){v=x(a,y,A,s,B)}else{v=x(y,A,s,B)}if(v!=undefined){var r=c._getCustomErrorMessage(d(y),t,b,B);if(r){v=r}}return v},_getCustomErrorMessage:function(p,i,o,r){var m=false;var b=/^custom\[.*\]$/.test(o)?c._validityProp.custom:c._validityProp[o];if(b!=undefined){m=p.attr("data-errormessage-"+b);if(m!=undefined){return m}}m=p.attr("data-errormessage");if(m!=undefined){return m}var a="#"+p.attr("id");if(typeof r.custom_error_messages[a]!="undefined"&&typeof r.custom_error_messages[a][o]!="undefined"){m=r.custom_error_messages[a][o]["message"]}else{if(i.length>0){for(var n=0;n<i.length&&i.length>0;n++){var q="."+i[n];if(typeof r.custom_error_messages[q]!="undefined"&&typeof r.custom_error_messages[q][o]!="undefined"){m=r.custom_error_messages[q][o]["message"];break}}}}if(!m&&typeof r.custom_error_messages[o]!="undefined"&&typeof r.custom_error_messages[o]["message"]!="undefined"){m=r.custom_error_messages[o]["message"]}return m},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(p,r,n,t,o){switch(p.prop("type")){case"text":case"password":case"textarea":case"file":case"select-one":case"select-multiple":default:var s=d.trim(p.val());var i=d.trim(p.attr("data-validation-placeholder"));var q=d.trim(p.attr("placeholder"));if((!s)||(i&&s==i)||(q&&s==q)){return t.allrules[r[n]].alertText}break;case"radio":case"checkbox":if(o){if(!p.attr("checked")){return t.allrules[r[n]].alertTextCheckboxMultiple}break}var b=p.closest("form, .validationEngineContainer");var a=p.attr("name");if(b.find("input[name='"+a+"']:checked").size()==0){if(b.find("input[name='"+a+"']:visible").size()==1){return t.allrules[r[n]].alertTextCheckboxe}else{return t.allrules[r[n]].alertTextCheckboxMultiple}}break}},_groupRequired:function(j,l,b,a){var k="["+a.validateAttribute+"*="+l[b+1]+"]";var i=false;j.closest("form, .validationEngineContainer").find(k).each(function(){if(!c._required(d(this),l,b,a)){i=true;return false}});if(!i){return a.allrules[l[b]].alertText}},_custom:function(p,q,b,r){var a=q[b+1];var n=r.allrules[a];var o;if(!n){alert("jqv:custom rule not found - "+a);return}if(n.regex){var m=n.regex;if(!m){alert("jqv:custom regex not found - "+a);return}var i=new RegExp(m);if(!i.test(p.val())){return r.allrules[a].alertText}}else{if(n.func){o=n.func;if(typeof(o)!=="function"){alert("jqv:custom parameter 'function' is no function - "+a);return}if(!o(p,q,b,r)){return r.allrules[a].alertText}}else{alert("jqv:custom type not allowed "+a);return}}},_funcCall:function(o,p,b,a){var n=p[b+1];var l;if(n.indexOf(".")>-1){var m=n.split(".");var i=window;while(m.length){i=i[m.shift()]}l=i}else{l=window[n]||a.customFunctions[n]}if(typeof(l)=="function"){return l(o,p,b,a)}},_equals:function(i,j,h,b){var a=j[h+1];if(i.val()!=d("#"+a).val()){return b.allrules.equals.alertText}},_maxSize:function(m,n,k,i){var b=n[k+1];var a=m.val().length;if(a>b){var l=i.allrules.maxSize;return l.alertText+b+l.alertText2}},_minSize:function(m,n,k,b){var i=n[k+1];var a=m.val().length;if(a<i){var l=b.allrules.minSize;return l.alertText+i+l.alertText2}},_min:function(m,n,k,b){var i=parseFloat(n[k+1]);var a=parseFloat(m.val());if(a<i){var l=b.allrules.min;if(l.alertText2){return l.alertText+i+l.alertText2}return l.alertText+i}},_max:function(m,n,k,i){var b=parseFloat(n[k+1]);var a=parseFloat(m.val());if(a>b){var l=i.allrules.max;if(l.alertText2){return l.alertText+b+l.alertText2}return l.alertText+b}},_past:function(b,q,r,i,t){var a=r[i+1];var o=d(b.find("input[name='"+a.replace(/^#+/,"")+"']"));var n;if(a.toLowerCase()=="now"){n=new Date()}else{if(undefined!=o.val()){if(o.is(":disabled")){return}n=c._parseDate(o.val())}else{n=c._parseDate(a)}}var s=c._parseDate(q.val());if(s>n){var p=t.allrules.past;if(p.alertText2){return p.alertText+c._dateToString(n)+p.alertText2}return p.alertText+c._dateToString(n)}},_future:function(b,q,r,i,t){var a=r[i+1];var o=d(b.find("input[name='"+a.replace(/^#+/,"")+"']"));var n;if(a.toLowerCase()=="now"){n=new Date()}else{if(undefined!=o.val()){if(o.is(":disabled")){return}n=c._parseDate(o.val())}else{n=c._parseDate(a)}}var s=c._parseDate(q.val());if(s<n){var p=t.allrules.future;if(p.alertText2){return p.alertText+c._dateToString(n)+p.alertText2}return p.alertText+c._dateToString(n)}},_isDate:function(b){var a=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);return a.test(b)},_isDateTime:function(b){var a=new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);return a.test(b)},_dateCompare:function(b,a){return(new Date(b.toString())<new Date(a.toString()))},_dateRange:function(g,h,b,a){if((!a.firstOfGroup[0].value&&a.secondOfGroup[0].value)||(a.firstOfGroup[0].value&&!a.secondOfGroup[0].value)){return a.allrules[h[b]].alertText+a.allrules[h[b]].alertText2}if(!c._isDate(a.firstOfGroup[0].value)||!c._isDate(a.secondOfGroup[0].value)){return a.allrules[h[b]].alertText+a.allrules[h[b]].alertText2}if(!c._dateCompare(a.firstOfGroup[0].value,a.secondOfGroup[0].value)){return a.allrules[h[b]].alertText+a.allrules[h[b]].alertText2}},_dateTimeRange:function(g,h,b,a){if((!a.firstOfGroup[0].value&&a.secondOfGroup[0].value)||(a.firstOfGroup[0].value&&!a.secondOfGroup[0].value)){return a.allrules[h[b]].alertText+a.allrules[h[b]].alertText2}if(!c._isDateTime(a.firstOfGroup[0].value)||!c._isDateTime(a.secondOfGroup[0].value)){return a.allrules[h[b]].alertText+a.allrules[h[b]].alertText2}if(!c._dateCompare(a.firstOfGroup[0].value,a.secondOfGroup[0].value)){return a.allrules[h[b]].alertText+a.allrules[h[b]].alertText2}},_maxCheckbox:function(n,o,p,m,l){var b=p[m+1];var i=o.attr("name");var a=n.find("input[name='"+i+"']:checked").size();if(a>b){l.showArrow=false;if(l.allrules.maxCheckbox.alertText2){return l.allrules.maxCheckbox.alertText+" "+b+" "+l.allrules.maxCheckbox.alertText2}return l.allrules.maxCheckbox.alertText}},_minCheckbox:function(n,o,p,m,l){var b=p[m+1];var i=o.attr("name");var a=n.find("input[name='"+i+"']:checked").size();if(a<b){l.showArrow=false;return l.allrules.minCheckbox.alertText+" "+b+" "+l.allrules.minCheckbox.alertText2}},_creditCard:function(s,t,o,v){var b=false,u=s.val().replace(/ +/g,"").replace(/-+/g,"");var a=u.length;if(a>=14&&a<=16&&parseInt(u)>0){var p=0,o=a-1,r=1,q,i=new String();do{q=parseInt(u.charAt(o));i+=(r++%2==0)?q*2:q}while(--o>=0);for(o=0;o<i.length;o++){p+=parseInt(i.charAt(o))}b=p%10==0}if(!b){return v.allrules.creditCard.alertText}},_ajax:function(B,E,w,F){var D=E[w+1];var A=F.allrules[D];var i=A.extraData;var y=A.extraDataDynamic;var v={fieldId:B.attr("id"),fieldValue:B.val()};if(typeof i==="object"){d.extend(v,i)}else{if(typeof i==="string"){var x=i.split("&");for(var w=0;w<x.length;w++){var C=x[w].split("=");if(C[0]&&C[0]){v[C[0]]=C[1]}}}}if(y){var u=[];var z=String(y).split(",");for(var w=0;w<z.length;w++){var a=z[w];if(d(a).length){var b=B.closest("form, .validationEngineContainer").find(a).val();var t=a.replace("#","")+"="+escape(b);v[a.replace("#","")]=b}}}if(F.eventTrigger=="field"){delete (F.ajaxValidCache[B.attr("id")])}if(!F.isError&&!c._checkAjaxFieldStatus(B.attr("id"),F)){d.ajax({type:F.ajaxFormValidationMethod,url:A.url,cache:false,dataType:"json",data:v,field:B,rule:A,methods:c,options:F,beforeSend:function(){},error:function(e,f){c._ajaxError(e,f)},success:function(h){var k=h[0];var g=d("#"+k).eq(0);if(g.length==1){var f=h[1];var j=h[2];if(!f){F.ajaxValidCache[k]=false;F.isError=true;if(j){if(F.allrules[j]){var e=F.allrules[j].alertText;if(e){j=e}}}else{j=A.alertText}if(F.showPrompts){c._showPrompt(g,j,"",true,F)}}else{F.ajaxValidCache[k]=true;if(j){if(F.allrules[j]){var e=F.allrules[j].alertTextOk;if(e){j=e}}}else{j=A.alertTextOk}if(F.showPrompts){if(j){c._showPrompt(g,j,"pass",true,F)}else{c._closePrompt(g)}}if(F.eventTrigger=="submit"){B.closest("form").submit()}}}g.trigger("jqv.field.result",[g,F.isError,j])}});return A.alertTextLoad}},_ajaxError:function(a,b){if(a.status==0&&b==null){alert("The page is not served from a server! ajax call failed")}else{if(typeof console!="undefined"){console.log("Ajax error: "+a.status+" "+b)}}},_dateToString:function(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},_parseDate:function(b){var a=b.split("-");if(a==b){a=b.split("/")}if(a==b){a=b.split(".");return new Date(a[2],(a[1]-1),a[0])}return new Date(a[0],(a[1]-1),a[2])},_showPrompt:function(n,l,m,k,j,b){var a=c._getPrompt(n);if(b){a=false}if(d.trim(l)){if(a){c._updatePrompt(n,a,l,m,k,j)}else{c._buildPrompt(n,l,m,k,j)}}},_buildPrompt:function(s,a,q,u,w){var b=d("<div>");b.addClass(c._getClassName(s.attr("id"))+"formError");b.addClass("parentForm"+c._getClassName(s.closest("form, .validationEngineContainer").attr("id")));b.addClass("formError");switch(q){case"pass":b.addClass("greenPopup");break;case"load":b.addClass("blackPopup");break;default:}if(u){b.addClass("ajaxed")}var x=d("<div>").addClass("formErrorContent").html(a).appendTo(b);var p=s.data("promptPosition")||w.promptPosition;if(w.showArrow){var t=d("<div>").addClass("formErrorArrow");if(typeof(p)=="string"){var r=p.indexOf(":");if(r!=-1){p=p.substring(0,r)}}switch(p){case"bottomLeft":case"bottomRight":b.find(".formErrorContent").before(t);t.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');break;case"topLeft":case"topRight":t.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');b.append(t);break}}if(w.addPromptClass){b.addClass(w.addPromptClass)}var v=s.attr("data-required-class");if(v!==undefined){b.addClass(v)}else{if(w.prettySelect){if(d("#"+s.attr("id")).next().is("select")){var o=d("#"+s.attr("id").substr(w.usePrefix.length).substring(w.useSuffix.length)).attr("data-required-class");if(o!==undefined){b.addClass(o)}}}}b.css({opacity:0});if(p==="inline"){b.addClass("inline");if(typeof s.attr("data-prompt-target")!=="undefined"&&d("#"+s.attr("data-prompt-target")).length>0){b.appendTo(d("#"+s.attr("data-prompt-target")))}else{s.after(b)}}else{s.before(b)}var r=c._calculatePosition(s,b,w);b.css({position:p==="inline"?"relative":"absolute",top:r.callerTopPosition,left:r.callerleftPosition,marginTop:r.marginTopSize,opacity:0}).data("callerField",s);if(w.autoHidePrompt){setTimeout(function(){b.animate({opacity:0},function(){b.closest(".formErrorOuter").remove();b.remove()})},w.autoHideDelay)}return b.animate({opacity:0.87})},_updatePrompt:function(p,b,a,n,q,r,l){if(b){if(typeof n!=="undefined"){if(n=="pass"){b.addClass("greenPopup")}else{b.removeClass("greenPopup")}if(n=="load"){b.addClass("blackPopup")}else{b.removeClass("blackPopup")}}if(q){b.addClass("ajaxed")}else{b.removeClass("ajaxed")}b.find(".formErrorContent").html(a);var o=c._calculatePosition(p,b,r);var m={top:o.callerTopPosition,left:o.callerleftPosition,marginTop:o.marginTopSize};if(l){b.css(m)}else{b.animate(m)}}},_closePrompt:function(b){var a=c._getPrompt(b);if(a){a.fadeTo("fast",0,function(){a.parent(".formErrorOuter").remove();a.remove()})}},closePrompt:function(a){return c._closePrompt(a)},_getPrompt:function(g){var h=d(g).closest("form, .validationEngineContainer").attr("id");var b=c._getClassName(g.attr("id"))+"formError";var a=d("."+c._escapeExpression(b)+".parentForm"+h)[0];if(a){return d(a)}},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(g){var h=d(document);var a=d("body");var b=(g&&g.hasClass("rtl"))||(g&&(g.attr("dir")||"").toLowerCase()==="rtl")||h.hasClass("rtl")||(h.attr("dir")||"").toLowerCase()==="rtl"||a.hasClass("rtl")||(a.attr("dir")||"").toLowerCase()==="rtl";return Boolean(b)},_calculatePosition:function(A,t,F){var s,B,y;var u=A.width();var a=A.position().left;var D=A.position().top;var b=A.height();var E=t.height();s=B=0;y=-E;var x=A.data("promptPosition")||F.promptPosition;var w="";var v="";var C=0;var z=0;if(typeof(x)=="string"){if(x.indexOf(":")!=-1){w=x.substring(x.indexOf(":")+1);x=x.substring(0,x.indexOf(":"));if(w.indexOf(",")!=-1){v=w.substring(w.indexOf(",")+1);w=w.substring(0,w.indexOf(","));z=parseInt(v);if(isNaN(z)){z=0}}C=parseInt(w);if(isNaN(w)){w=0}}}switch(x){default:case"topRight":B+=a+u-30;s+=D;break;case"topLeft":s+=D;B+=a;break;case"centerRight":s=D+4;y=0;B=a+A.outerWidth(true)+5;break;case"centerLeft":B=a-(t.width()+2);s=D+4;y=0;break;case"bottomLeft":s=D+A.height()+5;y=0;B=a;break;case"bottomRight":B=a+u-30;s=D+A.height()+5;y=0;break;case"inline":B=0;s=0;y=0}B+=C;s+=z;return{callerTopPosition:s+"px",callerleftPosition:B+"px",marginTopSize:y+"px"}},_saveOptions:function(g,b){if(d.validationEngineLanguage){var a=d.validationEngineLanguage.allRules}else{d.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page")}d.validationEngine.defaults.allrules=a;var h=d.extend(true,{},d.validationEngine.defaults,b);g.data("jqv",h);return h},_getClassName:function(a){if(a){return a.replace(/:/g,"_").replace(/\./g,"_")}},_jqSelector:function(a){return a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(k,l,i,b){var a,j;for(a=(i+1);a<l.length;a++){j=jQuery("#"+l[a]).first();if(j.length&&c._required(j,["required"],0,b,true)==undefined){return c._required(k,["required"],0,b)}}},_submitButtonClick:function(f){var a=d(this);var b=a.closest("form, .validationEngineContainer");b.data("jqv_submitButton",a.attr("id"))}};d.fn.validationEngine=function(b){var a=d(this);if(!a[0]){return a}if(typeof(b)=="string"&&b.charAt(0)!="_"&&c[b]){if(b!="showPrompt"&&b!="hide"&&b!="hideAll"){c.init.apply(a)}return c[b].apply(a,Array.prototype.slice.call(arguments,1))}else{if(typeof b=="object"||!b){c.init.apply(a,arguments);return c.attach.apply(a)}else{d.error("Method "+b+" does not exist in jQuery.validationEngine")}}};d.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:true,focusFirstField:true,showPrompts:true,validateNonVisibleFields:false,promptPosition:"topRight",bindMethod:"bind",inlineAjax:false,ajaxFormValidation:false,ajaxFormValidationURL:false,ajaxFormValidationMethod:"get",onAjaxFormComplete:d.noop,onBeforeAjaxFormValidation:d.noop,onValidationComplete:false,doNotShowAllErrosOnSubmit:false,custom_error_messages:{},binded:true,showArrow:true,isError:false,maxErrorsPerField:false,ajaxValidCache:{},autoPositionUpdate:false,InvalidFields:[],onFieldSuccess:false,onFieldFailure:false,onSuccess:false,onFailure:false,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:false,autoHideDelay:10000,fadeDuration:0.3,prettySelect:false,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:false}};d(function(){d.validationEngine.defaults.promptPosition=c.isRTL()?"topLeft":"topRight"})})(jQuery);